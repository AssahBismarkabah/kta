# Simple Tenant Template for security_test
# This template is optimized for working user creation with keycloak-config-cli

id: "security_test"
realm: "security_test"
displayName: "Security Test Corp Services"
enabled: true

# Minimal realm settings for successful user creation
loginTheme: "keycloak"
adminTheme: "keycloak"
accountTheme: "keycloak"
emailTheme: "keycloak"

# Basic password policy (same as working_demo)
passwordPolicy: "length(8)"

# Authentication settings (same as working_demo)
registrationAllowed: false
rememberMe: true
verifyEmail: false
loginWithEmailAllowed: true
duplicateEmailsAllowed: false
resetPasswordAllowed: true

# Session timeouts (same as working_demo)
ssoSessionIdleTimeout: 1800
ssoSessionMaxLifespan: 36000

# Realm roles
roles:
  realm:
    - name: "admin"
      description: "Administrator role for Security Test Corp"
    - name: "user"
      description: "Standard user role for Security Test Corp"

# Client configuration (simplified like working_demo)
clients:
  - clientId: "security_test-app"
    name: "Security Test Corp Application"
    enabled: true
    publicClient: true
    directAccessGrantsEnabled: true
    standardFlowEnabled: true
    protocol: "openid-connect"
    webOrigins:
      - "http://localhost:3000"
    redirectUris:
      - "http://localhost:3000/*"

# Groups configuration
groups:
  - name: "Administrators"
    path: "/Administrators"
    realmRoles:
      - "admin"
  - name: "Users"
    path: "/Users"
    realmRoles:
      - "user"

# User configuration - THIS SHOULD WORK NOW!
users:
  - username: "admin-security_test"
    email: "admin@security_test.example.com"
    firstName: "Security Test Corp"
    lastName: "Administrator"
    enabled: true
    emailVerified: true
    credentials:
      - type: "password"
        value: "t8GuZw%PTrt66yuX"
        temporary: false
    realmRoles:
      - "admin"
    groups:
      - "/Administrators"
  
  - username: "user-security_test"
    email: "user@security_test.example.com"
    firstName: "Test"
    lastName: "User"
    enabled: true
    emailVerified: true
    credentials:
      - type: "password"
        value: "TestUser123!"
        temporary: false
    realmRoles:
      - "user"
    groups:
      - "/Users" 