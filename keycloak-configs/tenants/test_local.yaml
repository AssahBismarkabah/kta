# Simple Tenant Template for test_local
# This template is optimized for working user creation with keycloak-config-cli

id: "test_local"
realm: "test_local"
displayName: "Local Test Company Services"
enabled: true

# Minimal realm settings for successful user creation
loginTheme: "keycloak"
adminTheme: "keycloak"
accountTheme: "keycloak"
emailTheme: "keycloak"

# Basic configuration without complex policies
passwordPolicy: "length(8)"
registrationAllowed: false
registrationEmailAsUsername: false
rememberMe: true
verifyEmail: false
loginWithEmailAllowed: true
duplicateEmailsAllowed: false
resetPasswordAllowed: true

# Minimal session settings
ssoSessionIdleTimeout: 1800  # 30 minutes
ssoSessionMaxLifespan: 36000  # 10 hours
offlineSessionIdleTimeout: 2592000  # 30 days

# Basic security settings
bruteForceProtected: true
permanentLockout: false
maxFailureWaitSeconds: 900
minimumQuickLoginWaitSeconds: 60
waitIncrementSeconds: 60
quickLoginCheckMilliSeconds: 1000
maxDeltaTimeSeconds: 43200
failureFactor: 30

# Realm roles
roles:
  realm:
    - name: "admin"
      description: "Administrator role for Local Test Company"
    - name: "user"
      description: "Standard user role for Local Test Company"
    - name: "manager"
      description: "Manager role for Local Test Company"

# Client configuration
clients:
  - clientId: "test_local-app"
    name: "Local Test Company Application"
    description: "Main application client for Local Test Company"
    enabled: true
    publicClient: true
    directAccessGrantsEnabled: true
    standardFlowEnabled: true
    implicitFlowEnabled: false
    serviceAccountsEnabled: false
    protocol: "openid-connect"
    webOrigins:
      - "http://localhost:3000"
      - "https://test_local.example.com"
    redirectUris:
      - "http://localhost:3000/*"
      - "https://test_local.example.com/*"
    defaultClientScopes:
      - "profile"
      - "email"
      - "roles"
    optionalClientScopes:
      - "address"
      - "phone"

# Groups configuration
groups:
  - name: "Administrators"
    path: "/Administrators"
    realmRoles:
      - "admin"
  - name: "Users"
    path: "/Users"
    realmRoles:
      - "user"
  - name: "Managers"
    path: "/Managers"
    realmRoles:
      - "manager"

# User configuration - this works with the simple template!
users:
  - username: "admin-test_local"
    email: "admin@test_local.example.com"
    firstName: "Local Test Company"
    lastName: "Administrator"
    enabled: true
    emailVerified: true
    credentials:
      - type: "password"
        value: "eTsYzyFEPc^41*0N"
        temporary: false
    realmRoles:
      - "admin"
    groups:
      - "/Administrators"
  
  - username: "user-test_local"
    email: "user@test_local.example.com"
    firstName: "Test"
    lastName: "User"
    enabled: true
    emailVerified: true
    credentials:
      - type: "password"
        value: "TestUser123!"
        temporary: false
    realmRoles:
      - "user"
    groups:
      - "/Users"

# Default groups for new users
defaultGroups:
  - "/Users" 